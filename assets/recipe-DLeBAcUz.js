import{_ as b,a as E,b as N,c as V,d as z,e as D,f as P}from"./AppBarLink-DZfFIEXi.js";import{r as x,w as j,c as u,a as $,o as l,b as r,d as y,n as k,e as S,f as _,t as d,F as w,_ as A,g as v,h as c,i as F,u as g,j as B,k as R,l as G,m as H}from"./app-BdarjTQu.js";const Q=["aria-checked"],J={key:0,class:"w-4 h-4 rounded-full bg-pink-600 absolute top-0 right-0"},K={key:1,class:"w-4 h-4 rounded-full bg-pink-600 absolute top-0 right-0 animate-ping"},U={__name:"CookModeToggle",setup(e){const t="wakeLock"in navigator,n=x(!1);if(t){let o=null;async function a(i){if(i)try{o=await navigator.wakeLock.request("screen"),o.addEventListener("release",()=>{n.value=!1})}catch{n.value=!1}else o.release().then(()=>o=null)}j(n,a),document.addEventListener("visibilitychange",()=>{o!==null&&document.visibilityState==="visible"&&(n.value=!0)})}function s(){n.value=!n.value}return(o,a)=>{const i=b;return t?(l(),u("button",{key:0,type:"button",role:"switch",class:k(["bg-white text-gray-700 border-2 border-gray-200 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-500 fixed bottom-6 right-6 rounded-full py-3 pl-4 pr-6 shadow-lg z-50 leading-3 flex gap-2 items-center",{"border-pink-600":n.value,"dark:border-pink-600":n.value}]),"aria-label":"Toggle cook mode","aria-checked":n.value?"true":"false",onClick:s},[n.value?(l(),u("div",J)):$("",!0),n.value?(l(),u("div",K)):$("",!0),r(i,{icon:n.value?"outdoor_grill":"outdoor_grill_border"},null,8,["icon"]),a[0]||(a[0]=y(" Cook mode ",-1))],10,Q)):$("",!0)}}},q={__name:"RecipeAppBar",props:{title:{type:String}},setup(e){return(t,n)=>{const s=b,o=E,a=N,i=V,p=S("ClientOnly");return l(),u(w,null,[r(o,{to:{name:"home"},"aria-label":"Go home"},{default:_(()=>[r(s,{icon:"arrow_back"})]),_:1}),r(a,null,{default:_(()=>[y(d(e.title),1)]),_:1}),r(p,null,{default:_(()=>[r(i)]),_:1})],64)}}},W={};function X(e,t){const n=q,s=z,o=D,a=U,i=S("ClientOnly"),p=P;return l(),u(w,null,[r(s,null,{default:_(()=>[v(e.$slots,"header",{},()=>[r(n)])]),_:3}),r(o,{class:"md:grid-cols-3 md:items-start"},{default:_(()=>[v(e.$slots,"default")]),_:3}),r(i,null,{default:_(()=>[r(a)]),_:1}),r(p)],64)}const Y=A(W,[["render",X]]),Z=["aria-checked"],ee={__name:"Method",setup(e){const t=x(!1);return(n,s)=>{const o=b;return l(),u("button",{type:"button",role:"switch",onClick:s[0]||(s[0]=a=>t.value=!t.value),"aria-label":"Toggle ingredient","aria-checked":t.value?"true":"false",class:"w-full text-start grid items-center gap-2"},[r(o,{class:k(["absolute top-0 right-0",{"text-pink-600":t.value,"opacity-20":!t.value}]),icon:t.value?"check_circle_outline":"circle"},null,8,["class","icon"]),c("span",{class:k({"opacity-60":t.value})},[v(n.$slots,"default")],2)],8,Z)}}},L=x(1),M=x(1);function te(e){L.value=e,M.value=e}function O(){const e=F(()=>M.value/L.value);return{serves:M,originalServes:L,scale:e}}const ne={"1/2":"½","1/3":"⅓","2/3":"⅔","1/4":"¼","3/4":"¾","1/5":"⅕","2/5":"⅖","3/5":"⅗","4/5":"⅘","1/6":"⅙","5/6":"⅚","1/8":"⅛","3/8":"⅜","5/8":"⅝","7/8":"⅞"},oe=e=>{if(e%1===0)return e.toString();const t=Math.floor(e),n=e-t,s=[2,3,4,5,6,8];let o=null,a=1/0;if(s.forEach(f=>{const h=Math.round(n*f),I=h/f,C=Math.abs(n-I);h>0&&C<a&&(o={num:h,den:f},a=C)}),!o)return e.toFixed(2);const i=`${o.num}/${o.den}`,p=ne[i]||i;return t>0?`${t}${p}`:p},se=["aria-checked"],re={__name:"Ingredient",props:{quantity:{type:[Number,null]},unit:{type:String}},setup(e){const t=e,{scale:n}=O(),s=F(()=>t.quantity?oe(t.quantity*n.value):""),o=x(!1);return(a,i)=>{const p=b;return l(),u("button",{type:"button",role:"switch",onClick:i[0]||(i[0]=f=>o.value=!o.value),"aria-label":"Toggle ingredient","aria-checked":o.value?"true":"false",class:"w-full text-start flex gap-2"},[r(p,{class:k(["shrink-0 mt-0.5",{"text-pink-600":o.value,"opacity-20":!o.value}]),icon:o.value?"check_circle_outline":"circle"},null,8,["class","icon"]),c("span",{class:k({"opacity-60":o.value})},[y(d(s.value)+d(e.unit)+" ",1),v(a.$slots,"default")],2)],8,se)}}},ae={class:"inline-flex gap-2 items-center"},ce=["disabled"],le={class:"w-6 text-center"},ie={__name:"ServesInput",setup(e){const{serves:t}=O();function n(){t.value>1&&t.value--}function s(){t.value++}return(o,a)=>{const i=b;return l(),u("span",ae,[c("button",{type:"button",onClick:n,disabled:g(t)<=1,class:"leading-none border border-gray-300 dark:border-gray-700 rounded disabled:opacity-20","aria-label":"Decrement servings"},[r(i,{icon:"minus"})],8,ce),c("span",le,d(g(t)),1),c("button",{type:"button",onClick:s,class:"leading-none border border-gray-300 dark:border-gray-700 rounded","aria-label":"Increment servings"},[r(i,{icon:"add"})])])}}},ue={},_e={class:"flex flex-wrap gap-2"};function de(e,t){return l(),u("div",_e,[v(e.$slots,"default")])}const pe=A(ue,[["render",de]]),me={__name:"BaseChip",props:{term:{type:String}},setup(e){return(t,n)=>{const s=S("RouterLink");return l(),B(s,{to:{name:"search",query:{q:e.term.toLowerCase()}},class:"chip rounded py-0.5 px-2 text-sm bg-gray-100 dark:bg-gray-800 capitalize"},{default:_(()=>[v(t.$slots,"default")]),_:3},8,["to"])}}},ge={__name:"RecipeChips",props:{chips:{type:Array}},setup(e){return(t,n)=>{const s=me,o=pe;return l(),B(o,null,{default:_(()=>[(l(!0),u(w,null,R(e.chips.sort(),a=>(l(),B(s,{key:a,term:a},{default:_(()=>[y(d(a),1)]),_:2},1032,["term"]))),128))]),_:1})}}},fe={__name:"ShareButton",setup(e){async function t(){try{await navigator.share({url:window.location.href})}catch{}}const n=x(navigator.canShare);return(s,o)=>{const a=b;return n.value?(l(),u("button",{key:0,type:"button",onClick:t,"aria-label":"Share recipe"},[r(a,{icon:"share"})])):$("",!0)}}},he=["aria-checked"],be={__name:"FavouriteRecipeToggle",setup(e){const{toggle:t,has:n}=G("favourites"),o=H().meta.slug,a=n(o);function i(){t(o)}return(p,f)=>{const h=b;return l(),u("button",{type:"button",role:"switch",onClick:i,"aria-label":"Toggle favourite","aria-checked":g(a)?"true":"false"},[r(h,{class:k({"text-pink-600":g(a)}),icon:g(a)?"favorite":"favorite_border"},null,8,["class","icon"])],8,he)}}},ye={},ke={class:"flex border divide-x rounded dark:border-gray-700 dark:divide-gray-700"};function ve(e,t){const n=be,s=fe,o=S("ClientOnly");return l(),u("div",ke,[r(n,{class:"flex-1 text-center p-2"}),r(o,null,{default:_(()=>[r(s,{class:"flex-1 text-center p-2"})]),_:1})])}const xe=A(ye,[["render",ve]]),$e=["src"],we={__name:"RecipeImage",props:{src:String},setup(e){return(t,n)=>(l(),u("img",{src:e.src,alt:"",width:"360",height:"360",class:"shadow block w-full rounded dark:filter dark:brightness-75 dark:contrast-110"},null,8,$e))}},T=e=>{if(e<60)return`${e}m`;if(e===60)return"1h";const t=Math.floor(e/60),n=e%60;return`${t}h ${n}m`},Ce={class:"grid gap-6"},Be={class:"grid gap-6 md:col-span-2"},Se={class:"text-2xl font-semibold"},Ie={class:"border-b border-t border-dotted dark:border-gray-800 h-10"},Te={class:"py-1"},Re={class:"border-b border-t border-dotted dark:border-gray-800 h-10"},Le={class:"text-start py-1"},Me={class:"border-b border-t border-dotted dark:border-gray-800 h-10"},Ae={class:"py-1"},Fe={class:"border-b border-t border-dotted dark:border-gray-800 h-10"},qe={class:"py-1"},Oe={class:"text-lg grid gap-6"},Ee={key:0,class:"block text-base text-gray-500 dark:text-gray-400"},Ne={class:"text-xl grid gap-16"},De={__name:"recipe",props:{recipe:{type:Object}},setup(e){return te(e.recipe.serves),(n,s)=>{const o=q,a=we,i=xe,p=ge,f=ie,h=re,I=ee,C=Y;return l(),B(C,null,{header:_(()=>[r(o,{title:e.recipe.title},null,8,["title"])]),default:_(()=>[c("div",Ce,[r(a,{src:e.recipe.image,slug:e.recipe.slug},null,8,["src","slug"]),r(i),r(p,{chips:e.recipe.keywords},null,8,["chips"])]),c("div",Be,[c("h1",Se,d(e.recipe.title),1),c("div",null,d(e.recipe.description),1),c("table",null,[c("tbody",null,[c("tr",Ie,[s[0]||(s[0]=c("th",{class:"text-start py-1"},"Serves",-1)),c("td",Te,[r(f)])]),c("tr",Re,[s[1]||(s[1]=c("th",{class:"text-start py-1"},"Total time",-1)),c("th",Le,d(g(T)(e.recipe.prepTime+e.recipe.cookTime)),1)]),c("tr",Me,[s[2]||(s[2]=c("th",{class:"text-start font-normal py-1"},"Preparation time",-1)),c("td",Ae,d(g(T)(e.recipe.prepTime)),1)]),c("tr",Fe,[s[3]||(s[3]=c("th",{class:"text-start font-normal py-1"},"Cook time",-1)),c("td",qe,d(g(T)(e.recipe.cookTime)),1)])])]),s[4]||(s[4]=c("h2",{class:"text-xl font-semibold mt-8"},"Ingredients",-1)),c("ul",Oe,[(l(!0),u(w,null,R(e.recipe.ingredients,m=>(l(),u("li",{key:m.name},[r(h,{quantity:m.quantity,unit:m.unit},{default:_(()=>[y(d(m.name)+" ",1),m.description?(l(),u("span",Ee,d(m.description),1)):$("",!0)]),_:2},1032,["quantity","unit"])]))),128))]),s[5]||(s[5]=c("h2",{class:"text-xl font-semibold mt-8"},"Method",-1)),c("ol",Ne,[(l(!0),u(w,null,R(e.recipe.methods,m=>(l(),u("li",{key:m,class:"relative"},[r(I,null,{default:_(()=>[y(d(m),1)]),_:2},1024)]))),128))])])]),_:1})}}};export{De as default};
