import{_ as h,a as D,b as E,c as N,d as P,e as z,f as j}from"./AppBarLink-M3VzQuWU.js";import{r as b,w as H,c as u,a as y,o as i,b as l,d as $,n as x,e as f,t as _,F as w,_ as S,f as k,g as s,h as R,u as v,i as O,j as B,k as A,l as U,m as V,p as G,q as Q,v as J,s as K}from"./index-BKxYTR2E.js";const W=["aria-checked"],X={key:0,class:"w-4 h-4 rounded-full bg-pink-600 absolute top-0 right-0"},Y={key:1,class:"w-4 h-4 rounded-full bg-pink-600 absolute top-0 right-0 animate-ping"},Z={__name:"CookModeToggle",setup(e){const o="wakeLock"in navigator,t=b(!1);if(o){let a=null;async function r(c){if(c)try{a=await navigator.wakeLock.request("screen"),a.addEventListener("release",()=>{t.value=!1})}catch{t.value=!1}else a.release().then(()=>a=null)}H(t,r),document.addEventListener("visibilitychange",()=>{a!==null&&document.visibilityState==="visible"&&(t.value=!0)})}function n(){t.value=!t.value}return(a,r)=>{const c=h;return o?(i(),u("button",{key:0,type:"button",role:"switch",class:x(["bg-white text-gray-700 border-2 border-gray-200 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-500 fixed bottom-6 right-6 rounded-full py-3 pl-4 pr-6 shadow-lg z-50 leading-3 flex gap-2 items-center",{"border-pink-600":t.value,"dark:border-pink-600":t.value}]),"aria-label":"Toggle cook mode","aria-checked":t.value?"true":"false",onClick:n},[t.value?(i(),u("div",X)):y("",!0),t.value?(i(),u("div",Y)):y("",!0),l(c,{icon:t.value?"outdoor_grill":"outdoor_grill_border"},null,8,["icon"]),r[0]||(r[0]=$(" Cook mode ",-1))],10,W)):y("",!0)}}},q={__name:"RecipeAppBar",props:{title:{type:String}},setup(e){return(o,t)=>{const n=h,a=D,r=E,c=N;return i(),u(w,null,[l(a,{to:{name:"home"},"aria-label":"Go home"},{default:f(()=>[l(n,{icon:"arrow_back"})]),_:1}),l(r,null,{default:f(()=>[$(_(e.title),1)]),_:1}),l(c)],64)}}},ee={};function te(e,o){const t=q,n=P,a=z,r=Z,c=j;return i(),u(w,null,[l(n,null,{default:f(()=>[k(e.$slots,"header",{},()=>[l(t)])]),_:3}),l(a,{class:"md:grid-cols-3 md:items-start"},{default:f(()=>[k(e.$slots,"default")]),_:3}),l(r),l(c)],64)}const ne=S(ee,[["render",te]]),oe=["aria-checked"],ae={__name:"Method",setup(e){const o=b(!1);return(t,n)=>{const a=h;return i(),u("button",{type:"button",role:"switch",onClick:n[0]||(n[0]=r=>o.value=!o.value),"aria-label":"Toggle ingredient","aria-checked":o.value?"true":"false",class:"w-full text-start grid items-center gap-2"},[l(a,{class:x(["absolute top-0 right-0",{"text-pink-600":o.value,"opacity-20":!o.value}]),icon:o.value?"check_circle_outline":"circle"},null,8,["class","icon"]),s("span",{class:x({"opacity-60":o.value})},[k(t.$slots,"default")],2)],8,oe)}}},M=b(1),L=b(1);function se(e){M.value=e,L.value=e}function F(){const e=R(()=>L.value/M.value);return{serves:L,originalServes:M,scale:e}}const re={"1/2":"½","1/3":"⅓","2/3":"⅔","1/4":"¼","3/4":"¾","1/5":"⅕","2/5":"⅖","3/5":"⅗","4/5":"⅘","1/6":"⅙","5/6":"⅚","1/8":"⅛","3/8":"⅜","5/8":"⅝","7/8":"⅞"},ce=e=>{if(e%1===0)return e.toString();const o=Math.floor(e),t=e-o,n=[2,3,4,5,6,8];let a=null,r=1/0;if(n.forEach(p=>{const d=Math.round(t*p),T=d/p,C=Math.abs(t-T);d>0&&C<r&&(a={num:d,den:p},r=C)}),!a)return e.toFixed(2);const c=`${a.num}/${a.den}`,m=re[c]||c;return o>0?`${o}${m}`:m},le=["aria-checked"],ie={__name:"Ingredient",props:{quantity:{type:[Number,null]},unit:{type:String}},setup(e){const o=e,{scale:t}=F(),n=R(()=>o.quantity?ce(o.quantity*t.value):""),a=b(!1);return(r,c)=>{const m=h;return i(),u("button",{type:"button",role:"switch",onClick:c[0]||(c[0]=p=>a.value=!a.value),"aria-label":"Toggle ingredient","aria-checked":a.value?"true":"false",class:"w-full text-start flex gap-2"},[l(m,{class:x(["shrink-0 mt-0.5",{"text-pink-600":a.value,"opacity-20":!a.value}]),icon:a.value?"check_circle_outline":"circle"},null,8,["class","icon"]),s("span",{class:x({"opacity-60":a.value})},[$(_(n.value)+_(e.unit)+" ",1),k(r.$slots,"default")],2)],8,le)}}},ue={class:"inline-flex gap-2 items-center"},de=["disabled"],pe={class:"w-6 text-center"},_e={__name:"ServesInput",setup(e){const{serves:o}=F();function t(){o.value>1&&o.value--}function n(){o.value++}return(a,r)=>{const c=h;return i(),u("span",ue,[s("button",{type:"button",onClick:t,disabled:v(o)<=1,class:"leading-none border border-gray-300 dark:border-gray-700 rounded disabled:opacity-20","aria-label":"Decrement servings"},[l(c,{icon:"minus"})],8,de),s("span",pe,_(v(o)),1),s("button",{type:"button",onClick:n,class:"leading-none border border-gray-300 dark:border-gray-700 rounded","aria-label":"Increment servings"},[l(c,{icon:"add"})])])}}},me={},fe={class:"flex flex-wrap gap-2"};function ge(e,o){return i(),u("div",fe,[k(e.$slots,"default")])}const he=S(me,[["render",ge]]),ve={__name:"BaseChip",props:{term:{type:String}},setup(e){return(o,t)=>{const n=O("RouterLink");return i(),B(n,{to:{name:"search",query:{q:e.term.toLowerCase()}},class:"chip rounded py-0.5 px-2 text-sm bg-gray-100 dark:bg-gray-800 capitalize"},{default:f(()=>[k(o.$slots,"default")]),_:3},8,["to"])}}},be={__name:"RecipeChips",props:{chips:{type:Array}},setup(e){return(o,t)=>{const n=ve,a=he;return i(),B(a,null,{default:f(()=>[(i(!0),u(w,null,A(e.chips.sort(),r=>(i(),B(n,{key:r,term:r},{default:f(()=>[$(_(r),1)]),_:2},1032,["term"]))),128))]),_:1})}}},ke={class:"bg-white dark:bg-gray-850 m-auto w-full max-w-screen-sm rounded"},ye={class:"flex justify-between gap-4 p-4"},$e={class:"font-bold"},xe={class:"p-4"},we={__name:"AppModal",props:{modelValue:Boolean,title:String},emits:["update:modelValue"],setup(e,{emit:o}){const t=o;function n(){t("update:modelValue",!1)}return(a,r)=>{const c=h;return e.modelValue?(i(),u("div",{key:0,class:"bg-black/50 fixed inset-0 z-50 grid place-items-center p-4",onClick:U(n,["self"])},[s("div",ke,[s("div",ye,[s("p",$e,_(e.title),1),s("button",{type:"button",onClick:n,"aria-label":"Close"},[l(c,{icon:"close"})])]),s("div",xe,[k(a.$slots,"default")])])])):y("",!0)}}},Ce={class:"flex border divide-x rounded dark:border-gray-700 dark:divide-gray-700"},Be={__name:"AddToCalendarButton",props:{open:Boolean},setup(e){const o=V(),t=b(new Date().toISOString().split("T")[0]),n=b(!1);async function a(){const r=encodeURIComponent(o.meta.title),c=window.location.href,m=t.value.replaceAll("-",""),p=new Date(t.value);p.setDate(p.getDate()+1);const d=p.toISOString().split("T")[0].replaceAll("-","");try{window.open(`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${r}&dates=${m}/${d}&details=${c}`,"_blank"),n.value=!1}catch{}}return(r,c)=>{const m=h,p=we;return i(),u(w,null,[s("button",G({type:"button",onClick:c[0]||(c[0]=d=>n.value=!0),"aria-label":"Share recipe"},r.$attrs),[l(m,{icon:"calendar"})],16),l(p,{modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=d=>n.value=d),title:"Select a date"},{default:f(()=>[s("div",Ce,[Q(s("input",{type:"date","onUpdate:modelValue":c[1]||(c[1]=d=>t.value=d),autofocus:"",class:"w-full p-2 placeholder-gray-500 focus:outline-none bg-transparent"},null,512),[[J,t.value]]),s("button",{type:"button",class:"px-4 py-2",onClick:a,"aria-label":"Add to calendar"},"Add")])]),_:1},8,["modelValue"])],64)}}},Se=S(Be,[["__scopeId","data-v-4408d747"]]),Te={__name:"ShareButton",setup(e){async function o(){try{await navigator.share({url:window.location.href})}catch{}}const t=b(navigator.canShare);return(n,a)=>{const r=h;return t.value?(i(),u("button",{key:0,type:"button",onClick:o,"aria-label":"Share recipe"},[l(r,{icon:"share"})])):y("",!0)}}},Ie=["aria-checked"],Ae={__name:"FavouriteRecipeToggle",setup(e){const{toggle:o,has:t}=K("favourites"),a=V().meta.slug,r=t(a);function c(){o(a)}return(m,p)=>{const d=h;return i(),u("button",{type:"button",role:"switch",onClick:c,"aria-label":"Toggle favourite","aria-checked":v(r)?"true":"false"},[l(d,{class:x({"text-pink-600":v(r)}),icon:v(r)?"favorite":"favorite_border"},null,8,["class","icon"])],8,Ie)}}},Me={},Le={class:"flex border divide-x rounded dark:border-gray-700 dark:divide-gray-700"};function Re(e,o){const t=Ae,n=Te,a=Se;return i(),u("div",Le,[l(t,{class:"flex-1 text-center p-2"}),l(n,{class:"flex-1 text-center p-2"}),l(a,{class:"flex-1 text-center p-2"})])}const Ve=S(Me,[["render",Re]]),qe=["src"],Fe={__name:"RecipeImage",props:{src:String},setup(e){return(o,t)=>(i(),u("img",{src:e.src,alt:"",width:"360",height:"360",class:"shadow block w-full rounded dark:filter dark:brightness-75 dark:contrast-110"},null,8,qe))}},I=e=>{if(e<60)return`${e}m`;if(e===60)return"1h";const o=Math.floor(e/60),t=e%60;return`${o}h ${t}m`},De={class:"grid gap-6"},Ee={class:"grid gap-6 md:col-span-2"},Ne=["innerHTML"],Pe={class:"h-10"},ze={class:"h-10"},je={class:"text-start"},He={class:"h-10"},Oe={class:"h-10"},Ue={key:0,class:"block text-base text-gray-500 dark:text-gray-400"},Ke={__name:"recipe",props:{recipe:{type:Object}},setup(e){return se(e.recipe.serves),(t,n)=>{const a=q,r=Fe,c=Ve,m=be,p=_e,d=ie,T=ae,C=ne;return i(),B(C,null,{header:f(()=>[l(a,{title:e.recipe.title},null,8,["title"])]),default:f(()=>[s("div",De,[l(r,{src:e.recipe.image,slug:e.recipe.slug},null,8,["src","slug"]),l(c),l(m,{chips:e.recipe.keywords},null,8,["chips"])]),s("div",Ee,[s("h1",null,_(e.recipe.title),1),s("div",{innerHTML:e.recipe.description},null,8,Ne),s("table",null,[s("tbody",null,[s("tr",Pe,[n[0]||(n[0]=s("th",{class:"text-start"},"Serves",-1)),s("td",null,[l(p)])]),s("tr",ze,[n[1]||(n[1]=s("th",{class:"text-start"},"Total time",-1)),s("th",je,_(v(I)(e.recipe.prepTime+e.recipe.cookTime)),1)]),s("tr",He,[n[2]||(n[2]=s("th",{class:"text-start font-normal"},"Preparation time",-1)),s("td",null,_(v(I)(e.recipe.prepTime)),1)]),s("tr",Oe,[n[3]||(n[3]=s("th",{class:"text-start font-normal"},"Cook time",-1)),s("td",null,_(v(I)(e.recipe.cookTime)),1)])])]),n[4]||(n[4]=s("h2",null,"Ingredients",-1)),s("ul",null,[(i(!0),u(w,null,A(e.recipe.ingredients,g=>(i(),u("li",{key:g.name},[l(d,{quantity:g.quantity,unit:g.unit},{default:f(()=>[$(_(g.name)+" ",1),g.description?(i(),u("span",Ue,_(g.description),1)):y("",!0)]),_:2},1032,["quantity","unit"])]))),128))]),n[5]||(n[5]=s("h2",null,"Method",-1)),s("ol",null,[(i(!0),u(w,null,A(e.recipe.methods,(g,Ge)=>(i(),u("li",{key:g},[l(T,null,{default:f(()=>[$(_(g),1)]),_:2},1024)]))),128))])])]),_:1})}}};export{Ke as default};
